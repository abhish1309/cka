# *Containers-Docker*

### To check to status of docker engine/docker daemon
```bash
service docker status 
```

### after installation of docker, start the docker
```bash
sudo service docker start			
```

### to start docker at boot
```bash
sudo service docker enable			
```

## *Containers* :- 
### to check if docker is installed or not, and its information if installed
```
docker info	
```
### to run container image
```
docker run nginx
```

### to check containers running
```
docker ps
```

### to remove container
```
docker rm <container id/container name>
```

### to get only container ids in output
```
docker ps -a -q			
```

### to delete all containers
```
docker rm $(docker ps -a -q)			
```

### to delete all containers
```
docker rm `sudo docker ps -a -q`
```

## *Container Images* :-

### to check docker images available
```
docker images	
```

### to get only docker images id
```
docker images -q			
```

### to delete none images.
```
docker images | grep none | awk '{print $3}' | xargs docker rmi			
```

### to search application images available in docker hub
```
docker search < application name >			
```

### to pull application images without running container
```
docker pull <application name>			
```

### to remove images
```
docker rmi <image id/ image name>			
```

### to delete all images
```
docker rmi $(docker images -q)			
```

### to delete all images
```
docker rmi `docker images -q`
```



### test the run virtually without actualy creating it, tests if the pod gets creates or fails (dry run)
kubectl run mypod11 --image=nginx --dry-run=client		

### display the file generated by cmd used  // generate & display POD manifest Yaml file (-o yaml). Dont create it(--dry-run)
kubectl run mypod12 --image=nginx --dry-run=client -o yaml		

### generate a yaml file (pod.yaml) directly and then create pod using the file pod.yaml
kubectl run mypod13 --image=nginx --dry-run=client -o yaml > pod.yml		

### only pod definition file is created and container port is opened //create a pod "custom-mypod" using the nginx image and expose it on container port 8080
kubectl run mypod14 --image=nginx --port=8080		

### service & pod is created // Create a pod called httpd using the image httpd:alpine in the default namespace. Next, create a service of type ClusterIP by the same name (httpd). The target port for the service should be 80
kubectl run mypod15 --image=nginx:alpine --port=80 --expose		

### pod & svc definition is created in a single file // can create pod & svc from the file 
k kubectl run mypod16 --image=nginx:alpine --port=80 --expose --dry-run=client -o yaml > pod-svc.yml		

### assign environment variable while creating pod
kubectl run mypod17 --image=nginx --env="environment=production" --env="department=finance"		

### assign labels while creating pod
kubectl run mypod18 --image=nginx --labels="app=myapp,tier=frontend"		

### assign labels while creating pod
kubectl run mypod18 --image=nginx -l app=myapp,tier=frontend		

### pass the argument by keeping the default command in container image.
kubectl run mypod19 --image=nginx <arg1> <arg2> <argN>		

### pass the command and argument, overriding the container image command.
kubectl run mypod20 --image=nginx --command -- <cmd> <arg1> <argN>		

### if true, service is created for the containers which are run
kubectl run mypod21 --image=nginx --expose=false		

### service account to set in the pod spec. this may depricate in future.
kubectl run mypod22 --image=nginx --serviceaccount=''

### annotations to apply to the pod.
kubectl run mypod23 --image=nginx --annotations=[]	

### one time use pod/container. pod do not restarts and gets deleted when we exit shell/ or when work is done.
kubectl run mypod24 --image=busybox -it --restart=Never --rm		

### it runs, execute the output, exits and pod is deleted.(ping and displays the output, gets deleted.
kubectl run mypod25 --image=busybox -it --restart=Never --rm -- wget -O- 10.1.1.131:80		

### passing command inside the container
kubectl run mypod26 --image=busybox -it --restart=Never --rm -- sh -c 'wget -O- 10.1.1.131:80'	

### pod-definition.yml file which has information to create a pod.
kubectl create -f pod-definition.yml		

### check pods created
kubectl get pods	

### to get the ips of pod and other extra details
kubectl get pods -o wide	

### get pods from namespace kube-system
kubectl -n kube-system get pods		

### displays all pods including kube-system
kubectl get pods -A		

### get list of pods and services
Kubectl get pods,svc		

### get list of all objects. Deployment, replicaset, services, pods
kubectl get all		

### show pods with labels 
kubectl get pods --show-labels		

### get pods with the help of labels; purpose=demonstrate-envars 
kubectl get pods -l purpose=demonstrate-envars		

### to print the label values as a columns 
kubectl get pods --label-columns=app		

### get pods from all namespaces
kubectl get pods --all-namespaces		

### get pods using selector
kubectl get pods --selector='app=demo2'		

### Get all running pods in the namespace
kubectl get pods --field-selector=status.phase=Running		

### to get the yaml definition file of currently running pod.
kubectl get pod mypod -o yaml > nginx01.yaml		

### to get the ip of the pod
kubectl get pod mypod -o jsonpath='{.status.podIP}'		

### get pod name & images list of all pods
kubectl get pod -o jsonpath='{range .items[*]}{.metadata.name}{"\t"}{.spec.containers[*].image}{"\n"}{end}'	

### print in columns, with headers
kubectl get pod -o custom-columns='POD_NAME:.metadata.name,IMAGE:.spec.containers[*].image'		
### print in columns, without  headers
kubectl get pod -o custom-columns='POD_NAME:.metadata.name,IMAGE:.spec.containers[*].image' --no-headers		


### to inspect pod
kubectl describe pod mypod	

### to edit/update the configuration of the running pod 'redis'
kubectl edit pod mypod		


### to delete a pod "mypod"
kubectl delete pod mypod	

## delete the pod without wasting time
kubectl delete pod mypod --force --grace-period=0		

### delete pod using selector
kubectl delete pod --selector="app=demo"		

### delete the pod using labels
kubectl delete pod -l app=label		

### all the resources in the file present in cluster will be deleted.
kubectl delete -f pod.yaml		

### To delete pods in Failed state in namespace default
kubectl -n default delete pods --field-selector=status.phase=Failed		

### to label existing pod
kubectl label pod mypod app=demo	

### if label is already existing and you need to edit value, then use -overwrite
kubectl label pod mypod app=demo2 -overwrite	

### to remove the label, use key and - sign at the end of it.
kubectl label pod mypod app-		

### to add annotations for pod
kubectl annotate po mypod1 description='my description'		

### to add annotations for multiple pods.
kubectl annotate po mypod1 nginx2 nginx3 description='my description'	 

### to check logs of pods/containers
kubectl logs mypod		

### to tail the logs
kubectl logs -f mypod		

### if we want a logs of specific container inside the pod
kubectl logs -f podname -c containername	

### logs of previously running pod
kubectl logs mypod -p		

### to start a bash session in pods container ### sh, bash, /bin/sh, /bin/bash
kubectl exec -it $POD_NAME -- bash		

### to execute a command in a pod
kubectl exec mypod1 -- date		

### to execute command in container "nginx-container" of pod "mypod"
kubectl exec mypod -c nginx-container -- date	
		
### different attributes of pods.
kubectl explain pods			

### to make the changes,
kubectl explain pods.spec.containers		

### listen on port 8888(local port) locally, forwarding to 5000(container port) in the pod. 
kubectl port-forward pod mypod	8888:5000	

### to check,test application locally. () http://localhost:xxxx)

### kubetl set image POD/POD_NAME container_name=image:tag ( change the image on the fly.)
kubectl set image pod mypod nginxcontainer=nginx:1.7.1		